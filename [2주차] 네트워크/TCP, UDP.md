# ✍️ 작성자
<!-- 이름을 작성하세요 -->
한지성

---

# ❓ 질문
<!-- 면접 질문을 작성하세요 -->
TCP와 UDP의 차이점과 장단점에 대해 설명해주세요.

---

# 💬 답변 요약
<!-- 질문에 대한 간단한 답변을 적어주세요 -->
**TCP**: 연결 지향적, 신뢰성 보장, 순서 보장, 오버헤드 존재  
**UDP**: 비연결 지향적, 빠른 전송, 신뢰성 없음, 단순함

---

# 🧠 핵심 키워드
<!-- 답변을 위해 필요한 핵심 키워드를 적어주세요 -->
- TCP (Transmission Control Protocol)
- UDP (User Datagram Protocol)
- 연결 지향 vs 비연결 지향
- 신뢰성 보장 vs 성능 우선
- 3-way handshake
- 패킷 순서 보장
- 오류 검출 및 재전송
- WebSocket
- 실시간 통신

---

# 🔥 상세 설명
<!-- 답변을 위해 필요한 CS 개념, 원리, 예시 등을 자세히 정리하세요 -->

### 트랜스포트 계층과 네트워크 계층 사이의 관계
- 네트워크 계층 프로토콜은 호스트들 사이의 논리적 통신을 제공
    - IP 프로토콜은 호스트들 간에 논리적 통신을 제공하지만, 신뢰성이나 순서 보장을 제공하지 않음
        - 세그먼트의 전달 보장 X
        - 순서 보장 X
        - 내부 데이터의 무결성(integrity) 보장 X
        - IP는 비신뢰적인 서비스

- 트랜스포트 계층 프로토콜은 호스트들 사이의 신뢰성 있는 통신을 제공
    - TCP와 UDP는 네트워크 계층 위에서 동작하며, IP 프로토콜을 통해 데이터를 전송
    - TCP는 신뢰성 있는 연결 지향적 서비스, UDP는 비연결 지향적 서비스 제공

###  TCP, UDP 기본 개념
- TCP(Transmission Control Protocol)
  - 신뢰적이고 연결지향형 서비스를 제공
  - 3-way handshake를 통해 연결을 설정 (데이터의 정확한 전송과 순서 보장을 위해 설계)
  - 혼잡 제어(congestion control) : 혼잡한 네트워크 링크에서 각 TCP 연결이 링크의 대역폭을 공평하게 공유하여 통과하도록 해줌

- UDP(User Datagram Protocol)
  - 비신뢰적이고 비연결형인 서비스를 제공
  - 데이터그램 단위로 전송하며, 연결 설정 없이 데이터를 전송
  - 신뢰성이나 순서 보장을 제공하지 않음


### TCP 연결 (3-Way Handshake)
```
Client          Server
  |               |
  |---- SYN ----->|  (1단계: 연결 요청)
  |<-- SYN+ACK ---|  (2단계: 연결 승인 + 응답)
  |---- ACK ----->|  (3단계: 연결 확인)
  |               |
  |   연결 완료   |
```
- **1단계 (SYN)**: 클라이언트가 서버에 연결 요청, 초기 순서 번호 전송
- **2단계 (SYN+ACK)**: 서버가 연결 승인, 자신의 초기 순서 번호도 전송
- **3단계 (ACK)**: 클라이언트가 서버의 순서 번호 확인, 연결 완료


### TCP 데이터 통신 과정
```
Client          Server
  |               |
  |--- DATA ----->|  (데이터 전송)
  |<---- ACK -----|  (수신 확인)
  |               |
  |--- DATA ----->|  (다음 데이터 전송)
  |<---- ACK -----|  (수신 확인)
  |               |
  |  패킷 손실 시 |
  |--- DATA ---X  |  (패킷 손실)
  |               |  (타임아웃 대기)
  |--- DATA ----->|  (재전송)
  |<---- ACK -----|  (수신 확인)
```
- **데이터 통신 과정**: 실제 데이터 전송 시 ACK 확인과 패킷 손실 시 재전송 과정

### TCP 연결 해제 (4-Way Handshake)
```
Client          Server
  |               |
  |---- FIN ----->|  (1단계: 연결 종료 요청)
  |<---- ACK -----|  (2단계: 종료 요청 확인)
  |               |
  |<---- FIN -----|  (3단계: 서버도 연결 종료)
  |---- ACK ----->|  (4단계: 종료 확인)
  |               |
  |   연결 완전   |
  |     해제      |
```
- **1단계 (FIN)**: 클라이언트가 연결 종료 요청
- **2단계 (ACK)**: 서버가 종료 요청 확인 (아직 데이터 전송 가능)
- **3단계 (FIN)**: 서버도 연결 종료 준비 완료
- **4단계 (ACK)**: 클라이언트가 최종 확인, 연결 완전 해제

### 신뢰성 보장 메커니즘
1. **순서 번호 (Sequence Number)**: 데이터 패킷의 순서 관리
2. **확인 응답 (ACK)**: 데이터 수신 확인
3. **재전송 (Retransmission)**: 손실된 패킷 재전송
4. **체크섬 (Checksum)**: 데이터 무결성 검증
5. **타임아웃**: 일정 시간 내 ACK 미수신 시 재전송

### TCP 전송 제어 기법
- 흐름 제어 (Flow Control)
  - 수신자의 수용 능력에 따라 송신 속도 조절
  - 수신자가 송신자에게 자신의 상태를 주기적으로 피드백
- 오류 제어 (Error Control)
  - 체크섬으로 데이터 무결성 확인
  - ACK를 통해 수신된 데이터 확인
  - 타임아웃 설정 후 ACK 미수신 시 재전송
- 혼잡 제어 (Congestion Control)
  - 네트워크 내에 패킷의 수가 과도하게 증가하는 현상 제어
  - 네트워크 혼잡이 발생하면 송신 속도를 조절

### UDP 데이터 전송
```
Client          Server
  |               |
  |--- DATA ----->|  (데이터 전송 - 즉시)
  |               |  (수신 확인 없음)
  |--- DATA ----->|  (다음 데이터 전송 - 즉시)
  |               |  (수신 확인 없음)
  |--- DATA ----->|  (연속 데이터 전송)
  |               |  (수신 확인 없음)
  |               |
  |   연결 없음    |
  | 상태 관리 없음 |
```
- 연결 설정 없이 데이터그램 단위로 전송
- 수신 확인이나 재전송 없음
- 패킷 손실 시에 대한 감지 X

### TCP vs UDP 비교

| 항목         | TCP             | UDP             |
|--------------|------------------|------------------|
| 연결 방식    | 연결형 서비스     | 비연결형 서비스   |
| 패킷 교환    | 가상 회선 방식     | 데이터그램 방식   |
| 전송 순서 보장 | 보장함            | 보장하지 않음     |
| 신뢰성       | 높음             | 낮음             |
| 전송 속도    | 느림             | 빠름             |


### TCP 장점
- **데이터 무결성**: 모든 데이터가 정확히 전달됨
- **순서 보장**: 보낸 순서대로 받음
- **연결 관리**: 연결 상태를 명확히 파악 가능
- **표준화**: 웹 브라우저, HTTP 등에서 널리 사용

### TCP 단점
- **오버헤드**: 연결 설정, 유지, 해제 비용
- **속도**: 신뢰성을 위한 추가 처리로 상대적으로 느림
- **자원 소모**: 서버에서 연결 상태 관리 필요

### UDP 장점
- **빠른 속도**: 최소한의 처리로 즉시 전송
- **단순함**: 구현이 간단하고 오버헤드 적음
- **실시간성**: 지연 시간 최소화
- **브로드캐스트**: 일대다 통신 효율적

### UDP 단점
- **신뢰성 없음**: 데이터 손실 가능성
- **순서 보장 없음**: 패킷 순서 뒤바뀜 가능
- **흐름 제어 없음**: 네트워크 혼잡 시 문제 발생

### TCP 사용 사례
- **웹 서비스**: HTTP/HTTPS
- **이메일**: SMTP, POP3, IMAP
- **파일 전송**: FTP, SFTP
- **원격 접속**: SSH, Telnet
- **채팅**: WhatsApp, Telegram, Discord

### UDP 사용 사례
- **DNS**: 도메인 이름 해석
- **DHCP**: IP 주소 할당
- **게임**: 실시간 멀티플레이어 게임
- **스트리밍**: 라이브 비디오/오디오 스트리밍
- **VoIP**: Skype, Zoom 등의 음성 통화
- **IoT**: 센서 데이터 전송

---

- 채팅 서버-클라이언트간에는 TCP와 UDP 중 어떤 프로토콜을 사용하는 것이 좋을지에 대해 가능한 구체적으로 설명해주세요. 
    - **채팅 서비스**: 일반적으로 TCP(WebSocket) 사용 권장, 특수한 경우(게임, 실시간 방송)에서 UDP 고려

---

# 🔗 참고 자료
<!-- 질문과 답변을 준비할 때 참고한 자료, 링크 등을 남겨주세요 -->
- James F. Kurose, Keith W. Ross, Computer Networking: A Top-Down Approach
- 오키타 토시야, 한 권으로 끝내는 네트워크 기초
