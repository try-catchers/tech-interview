# βοΈ μ‘μ„±μ
κΉ€μ§€μ

---

# β“ μ§λ¬Έ
3-way handshakeλ€ λ¬΄μ—‡μΈκ°€μ”?

---

# π’¬ λ‹µλ³€ μ”μ•½
TCP μ—°κ²°μ„ μ„¤μ •ν•λ” ν‘μ¤€ ν”„λ΅ν† μ½λ΅, ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„κ°€ μ„Έ λ²μ λ©”μ‹μ§€(SYN β†’ SYN-ACK β†’ ACK)λ¥Ό κµν™ν•μ—¬ μ„λ΅μ μƒνƒλ¥Ό ν™•μΈν•κ³  μ•μ •μ μΈ ν†µμ‹ μ„ μ‹μ‘ν•λ” κ³Όμ •μ΄λ‹¤.   
μ΄ λ°©μ‹μ€ λ‹¨μν• μ–‘λ°©ν–¥(2-way) ν•Έλ“μ…°μ΄ν¬μ λ¬Έμ μ μ„ ν•΄κ²°ν•λ©°, μ—°κ²° μ‹ λΆ°μ„±κ³Ό λ°μ΄ν„° μ „λ‹¬μ μ •ν™•μ„±μ„ λ³΄μ¥ν•λ‹¤.

---

# π§  ν•µμ‹¬ ν‚¤μ›λ“
TCP, 2-way handshake, 3-way handshake, SYN, ACK, μ‹ν€€μ¤ λ²νΈ, ν”„λ΅ν† μ½

---

# π”¥ μƒμ„Έ μ„¤λ…

## π¤ ν•Έλ“μ…°μ΄ν¬λ€?
ν•Έλ“μ…°μ΄ν¬λ” μ¥μΉλ‚ ν”„λ΅μ„Έμ¤κ°€ μ„λ΅ ν†µμ‹ μ„ μ‹μ‘ν•κΈ° μ „μ—, μ—°κ²° μ΅°κ±΄(λ©”μ‹μ§€ μ „μ†΅ λ°©μ‹, μΈμ½”λ”©, μ „μ†΅ μ†λ„ λ“±)μ„ ν‘μƒν•λ” κ³Όμ •μ΄λ‹¤.  
μ΄λ¥Ό ν†µν•΄ ν†µμ‹  μ°Έμ—¬μ λ¨λ‘κ°€ ν•©μν• λ§¤κ°λ³€μμ™€ κ·μΉ™μ— λ”°λΌ μ•μ •μ μΌλ΅ λ°μ΄ν„°λ¥Ό κµν™ν•  μ μλ‹¤.  

| ν”„λ΅ν† μ½                                   | ν•Έλ“μ…°μ΄ν¬ λ©μ  λ° νΉμ§•                                              |  
|:---------------------------------------|:-----------------------------------------------------------|  
| TCP(μ „μ†΅ μ μ–΄ ν”„λ΅ν† μ½)                        | 3-way handshakeλ΅ λ‘ λ‹Ήμ‚¬μ κ°„ λ©”μ‹μ§€ κµν™μ„ λ™κΈ°ν™”ν•μ—¬ μ•μ •μ μΈ ν†µμ‹  κµ¬μ¶•          |  
| TLS(μ „μ†΅ κ³„μΈµ λ³΄μ•)                          | νΉμ • μ—°κ²°μ— λ€ν• λ³΄μ• κΈ°λ¥(μ•”νΈν™” μ•κ³ λ¦¬μ¦, ν‚¤ λ“±) μ •μ                          |  
| SMTP(λ‹¨μ λ©”μΌ μ „μ†΅ ν”„λ΅ν† μ½)                    | μ„λ²„μ™€ μ‚¬μ©μ μΈμ¦, μ•”νΈν™” ν”„λ΅ν† μ½, μµλ€ λ©”μ‹μ§€ ν¬κΈ° λ“± ν‘μ                       |  
| Dial-up Internet Access(μ „ν™”μ„  κΈ°λ° μΈν„°λ„· μ ‘μ†) | ν†µμ‹  ν”„λ΅ν† μ½ μ •μ, μ—μ½” μ–µμ  κΈ°λ¥ λΉ„ν™μ„±ν™”, μ μ ν• λ³€μ΅° λ°©μ‹ μ„ νƒ, μ—°κ²° μµμ ν™”            |

## 2οΈβƒ£ μ–‘λ°©ν–¥ ν•Έλ“μ…°μ΄ν¬(2-way handshake)

### π§© κ°μ”
μ–‘λ°©ν–¥ ν•Έλ“μ…°μ΄ν¬λ” ν†µμ‹ μ„ μ›ν•λ” λ‘ λ‹Ήμ‚¬μ κ°„μ μ—°κ²°μ„ μƒμ„±ν•λ” κ°„λ‹¨ν• ν”„λ΅ν† μ½μ΄λ‹¤.  
SYN(λ™κΈ°ν™”) λ©”μ‹μ§€μ™€ ACK(ν™•μΈ) λ©”μ‹μ§€λ¥Ό μ‚¬μ©ν•λ‹¤.

### π“ μ μ°¨
- ν΄λΌμ΄μ–ΈνΈκ°€ SYN(seq=X)μ„ μ „μ†΅ν•λ‹¤.
- μ„λ²„κ°€ ACK(ack=X+1)λ¥Ό μ‘λ‹µν•λ‹¤.

![2-way handshake](images/2-wayHandshake.png)

### β οΈ λ¬Έμ 
μ΄ λ°©μ‹μ€ κ°„λ‹¨ν•μ§€λ§ μ„λ²„μ ACK μ‘λ‹µμ΄ μ§€μ—°λ  κ²½μ° μ‹ν€€μ¤ λ²νΈ λ¶μΌμΉλ΅ μ¤λ¥κ°€ λ°μƒν•  μ μλ‹¤.  

1. ν΄λΌμ΄μ–ΈνΈκ°€ SYN(seq=100)μ„ μ „μ†΅ν•λ‹¤.
2. μ„λ²„λ” ACK(ack=101)λ¥Ό μ „μ†΅ν•μ§€λ§, λ„¤νΈμ›ν¬ μ§€μ—°μΌλ΅ μΈν•΄ λ¦κ² λ„μ°©ν•λ‹¤.
3. ν΄λΌμ΄μ–ΈνΈλ” νƒ€μ„μ•„μ›ƒμΌλ΅ μΈν•΄ μ—°κ²° μ‹¤ν¨λ΅ κ°„μ£Όν•κ³ , μƒλ΅μ΄ SYN(seq=400)μ„ μ „μ†΅ν•λ‹¤.
4. μ„λ²„λ” μ΄μ „ SYN(seq=100)μ— λ€ν• ACKλ¥Ό μ΄λ―Έ λ³΄λƒκΈ° λ•λ¬Έμ—, μƒλ΅μ΄ SYN(seq=400)μ€ λ¬΄μ‹ν•λ‹¤.
5. μ§€μ—°λ ACK(ack=101)κ°€ ν΄λΌμ΄μ–ΈνΈμ— λ„μ°©ν•λ‹¤.
6. ν΄λΌμ΄μ–ΈνΈλ” μ΄ ACKλ¥Ό λ°©κΈ λ³΄λ‚Έ SYN(seq=400)μ— λ€ν• μ‘λ‹µμΌλ΅ μ°©κ°ν•λ‹¤.
7. ν΄λΌμ΄μ–ΈνΈλ” seq=401λ¶€ν„° λ°μ΄ν„°λ¥Ό μ „μ†΅ν•μ§€λ§, μ„λ²„λ” seq=101 μ΄ν›„μ λ°μ΄ν„°λ¥Ό κΈ°λ€ν•λ‹¤. μ‹ν€€μ¤ λ²νΈ λ¶μΌμΉλ΅ μΈν•΄ ν†µμ‹  μ¤λ¥κ°€ λ°μƒν•λ‹¤.

![delayed ack](images/DelayedACK.png)

## 3οΈβƒ£ μ„Έ λ°©ν–¥ ν•Έλ“μ…°μ΄ν¬(3-way handshake)

### π§© κ°μ”
μ„Έ λ°©ν–¥ ν•Έλ“μ…°μ΄ν¬λ„ μ–‘λ°©ν–¥ ν•Έλ“μ…°μ΄ν¬μ™€ λ§μ°¬κ°€μ§€λ΅ SYNκ³Ό ACK λ©”μ‹μ§€λ¥Ό μ‚¬μ©ν•΄ λ‘ λ‹Ήμ‚¬μ κ°„ μ—°κ²°μ„ μ„¤μ •ν•λ‹¤.  
μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈλ” κ°κ° μ‹ν€€μ¤ λ²νΈλ¥Ό μ κ³µν•λ” κ²ƒλΏλ§ μ•„λ‹λΌ, μ„λ΅μ μ‹ν€€μ¤ λ²νΈλ¥Ό ν™•μΈν•λ‹¤.  
μ΄λ΅ μΈν•΄ SYN μ¤‘λ³µ μ¤λ¥ λ°μƒμ„ λ°©μ§€ν•  μ μλ‹¤.  

### π“ μ μ°¨
- ν΄λΌμ΄μ–ΈνΈκ°€ SYN(seq=X)μ„ μ „μ†΅ν•λ‹¤.
- μ„λ²„κ°€ SYN-ACK(seq=Y, ack=X+1)λ¥Ό μ‘λ‹µν•λ‹¤.
- ν΄λΌμ΄μ–ΈνΈκ°€ ACK(seq=X+1, ack=Y+1)λ¥Ό μ „μ†΅ν•λ‹¤.

![3-way handshake](images/3-wayHandshake.png)
---

# π”— μ°Έκ³  μλ£
- [Baeldung - Two-Way Handshake and Three-Way Handshake](https://www.baeldung.com/cs/handshakes)
- [Baeldung - SYN/ACK in the TCP Protocol](https://www.baeldung.com/cs/tcp-protocol-syn-ack)